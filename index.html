<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BRITS ABROAD 2025 ‚Äì Your Relocation Journey</title>
<style>
  body {font-family: 'Inter', Arial, sans-serif; background: linear-gradient(to bottom, #f0f8ff, #e6f2ff); color: #00247d; text-align: center; margin: 0; padding: 20px; line-height: 1.6;}
  h1 {font-size: 2.8em; color: #00247d; margin: 20px; font-weight: 700;}
  p.subtitle {font-size: 1.5em; margin-bottom: 30px;}
  select {font-size: 1.4em; padding: 12px; border-radius: 12px; margin: 20px; border: 2px solid #c8102e; background: white;}
  .card {background: white; border-radius: 20px; padding: 30px; margin: 20px auto; max-width: 460px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); animation: fadeIn 0.5s;}
  input[type=range] {width: 100%; height: 40px; margin: 15px 0; background: #e2e8f0; border-radius: 20px;}
  input[type=range]::-webkit-slider-thumb {background: #c8102e; width: 24px; height: 24px; border-radius: 50%; cursor: pointer;}
  button {background: #c8102e; color: white; padding: 16px 32px; font-size: 1.4em; border: none; border-radius: 50px; cursor: pointer; margin: 20px 0; transition: all 0.3s;}
  button:hover {background: #a30d25; transform: scale(1.05);}
  .result, .visaResult, .docResult {font-size: 1.6em; background: #c8102e; color: white; padding: 20px; border-radius: 16px; margin: 25px 0; animation: pulse 0.5s;}
  table {width: 100%; border-collapse: collapse; margin: 20px 0; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1);}
  th, td {padding: 12px; text-align: left; border-bottom: 1px solid #ddd;}
  th {background: #00247d; color: white;}
  .save {color: #c8102e; font-weight: bold;}
  .countdown {font-size: 1.8em; color: #c8102e; margin: 30px; font-weight: bold; background: white; padding: 20px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);}
  .phases {display: flex; justify-content: space-around; margin: 40px 0; flex-wrap: wrap;}
  .phase {width: 100px; height: 100px; background: #e6f2ff; border-radius: 50%; display: flex; flex-direction: column; justify-content: center; align-items: center; margin: 10px; cursor: pointer; transition: all 0.3s;}
  .phase.active {background: #c8102e; color: white; transform: scale(1.1);}
  .phase.completed {background: #28a745; color: white;}
  .phase-icon {font-size: 1.8em; margin-bottom: 5px;}
  .progress-bar {width: 100%; height: 10px; background: #e2e8f0; border-radius: 5px; margin: 20px 0; overflow: hidden;}
  .progress-fill {height: 100%; background: #c8102e; transition: width 0.5s; border-radius: 5px;}
  @keyframes fadeIn {from {opacity: 0; transform: translateY(20px);} to {opacity: 1; transform: translateY(0);}}
  @keyframes pulse {0% {transform: scale(1);} 50% {transform: scale(1.05);} 100% {transform: scale(1);}}
  @media (prefers-color-scheme: dark) {body {background: #121212; color: #f0f8ff;} .card {background: #1e1e1e;}}
</style>
</head>
<body>
<h1>BRITS ABROAD 2025</h1>
<p class="subtitle">Escape the 2025 Budget squeeze ‚Äì Your 10-Phase Relocation Journey</p>

<div class="progress-bar">
  <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
</div>

<div class="phases" id="phases">
  <div class="phase" onclick="selectPhase(1)" data-phase="1">
    <div class="phase-icon">üåç</div>
    <div>Dream Destination</div>
  </div>
  <div class="phase" onclick="selectPhase(2)" data-phase="2">
    <div class="phase-icon">üí∞</div>
    <div>Financial Freedom</div>
  </div>
  <div class="phase" onclick="selectPhase(3)" data-phase="3">
    <div class="phase-icon">üìã</div>
    <div>Visa Victory</div>
  </div>
  <div class="phase" onclick="selectPhase(4)" data-phase="4">
    <div class="phase-icon">üìÅ</div>
    <div>Document Dynasty</div>
  </div>
  <div class="phase" onclick="selectPhase(5)" data-phase="5">
    <div class="phase-icon">üìä</div>
    <div>Budget Blueprint</div>
  </div>
  <div class="phase" onclick="selectPhase(6)" data-phase="6">
    <div class="phase-icon">üöö</div>
    <div>Move Mastery</div>
  </div>
  <div class="phase" onclick="selectPhase(7)" data-phase="7">
    <div class="phase-icon">üè†</div>
    <div>Settlement Success</div>
  </div>
  <div class="phase" onclick="selectPhase(8)" data-phase="8">
    <div class="phase-icon">üë•</div>
    <div>Community Connections</div>
  </div>
  <div class="phase" onclick="selectPhase(9)" data-phase="9">
    <div class="phase-icon">üíº</div>
    <div>Tax Triumph</div>
  </div>
  <div class="phase" onclick="selectPhase(10)" data-phase="10">
    <div class="phase-icon">üéâ</div>
    <div>Celebration Station</div>
  </div>
</div>

<div id="phaseContent">
  <div class="card" id="phase1">
    <h2>Phase 1: Dream Destination</h2>
    <select id="country" onchange="changeCountry()">
      <option>Portugal</option><option>Spain</option><option>UAE</option><option>Thailand</option><option>Cyprus</option>
      <option>Greece</option><option>Italy</option><option>France</option><option>Poland</option><option>Latvia</option>
      <option>Costa Rica</option><option>Malta</option><option>Hungary</option><option>Argentina</option><option>USA</option>
    </select>
    <button onclick="completePhase(1)">Complete Phase 1</button>
  </div>

  <div class="card" id="phase2" style="display:none;">
    <h2>Phase 2: Financial Freedom</h2>
    <label>Annual Pension: ¬£<span id="pensionVal">10,000</span></label>
    <input type="range" min="0" max="60000" value="10000" id="pension" oninput="calc()">
    <label>UK Property: ¬£<span id="propertyVal">300,000</span></label>
    <input type="range" min="0" max="2000000" value="300000" step="10000" id="property" oninput="calc()">
    <div class="result" id="result">You could save ¬£9,200/year!</div>
    <button onclick="completePhase(2)">Complete Phase 2</button>
  </div>

  <div class="card" id="phase3" style="display:none;">
    <h2>Phase 3: Visa Victory</h2>
    <select id="q1"><option>Monthly Income?</option><option value="0">Under ‚Ç¨870</option><option value="1">‚Ç¨870‚Äì‚Ç¨3,279</option><option value="2">‚Ç¨3,280+</option></select>
    <select id="q2"><option>Remote Work?</option><option value="0">No</option><option value="1">Yes</option></select>
    <select id="q4"><option>Family Joining?</option><option value="0">No</option><option value="1">Yes</option></select>
    <button onclick="checkVisa()">Show My Best Visa</button>
    <div class="visaResult" id="visaResult">Answer above</div>
    <button onclick="completePhase(3)">Complete Phase 3</button>
  </div>

  <div class="card" id="phase4" style="display:none;">
    <h2>Phase 4: Document Dynasty</h2>
    <input type="file" id="files" multiple style="display:none;">
    <button onclick="document.getElementById('files').click()">Choose Files</button>
    <div class="docResult" id="docResult"></div>
    <button onclick="completePhase(4)">Complete Phase 4</button>
  </div>

  <div class="card" id="phase5" style="display:none;">
    <h2>Phase 5: Budget Blueprint</h2>
    <table>
      <tr><th>Item</th><th>UK</th><th>Selected Country</th><th>Save</th></tr>
      <tr><td>Rent</td><td>¬£1,300</td><td>¬£720</td><td class="save">¬£580</td></tr>
      <tr><td>Groceries</td><td>¬£400</td><td>¬£240</td><td class="save">¬£160</td></tr>
      <tr><td>Total</td><td>¬£2,085</td><td>¬£1,160</td><td class="save">¬£925</td></tr>
    </table>
    <button onclick="completePhase(5)">Complete Phase 5</button>
  </div>

  <div class="card" id="phase6" style="display:none;">
    <h2>Phase 6: Move Mastery</h2>
    <p>Packing checklist: Passport, clothes, adapters...</p>
    <input type="range" min="0" max="5000" value="2000" id="shipping" oninput="calcShipping()">
    <div id="shippingResult">Shipping cost: ¬£2,000</div>
    <button onclick="completePhase(6)">Complete Phase 6</button>
  </div>

  <div class="card" id="phase7" style="display:none;">
    <h2>Phase 7: Settlement Success</h2>
    <p>Bank setup, healthcare, community groups ‚Äì congratulations!</p>
    <button onclick="completePhase(7)">Complete Phase 7</button>
  </div>

  <div class="card" id="phase8" style="display:none;">
    <h2>Phase 8: Community Connections</h2>
    <p>Expat groups, language classes, social events</p>
    <button onclick="completePhase(8)">Complete Phase 8</button>
  </div>

  <div class="card" id="phase9" style="display:none;">
    <h2>Phase 9: Tax Triumph</h2>
    <p>UK tax filing, double taxation treaties, accountant tips</p>
    <button onclick="completePhase(9)">Complete Phase 9</button>
  </div>

  <div class="card" id="phase10" style="display:none;">
    <h2>Phase 10: Celebration Station</h2>
    <p>You did it! Welcome to your new life abroad üéâ</p>
    <button onclick="completeJourney()">Celebrate Your Move!</button>
  </div>
</div>

<div class="countdown" id="countdown">NI Top-Up Window: calculating...</div>

<script>
  let currentPhase = 1;
  const phases = ['phase1', 'phase2', 'phase3', 'phase4', 'phase5', 'phase6', 'phase7', 'phase8', 'phase9', 'phase10'];

  function selectPhase(n) {
    if (n > currentPhase) return;
    document.querySelectorAll('.phase').forEach(p => p.classList.remove('active'));
    document.querySelector(`[data-phase="${n}"]`).classList.add('active');
    phases.forEach(p => document.getElementById(p).style.display = 'none');
    document.getElementById(phases[n-1]).style.display = 'block';
    document.getElementById('progressFill').style.width = (n / 10 * 100) + '%';
  }

  function completePhase(n) {
    if (n < currentPhase) return;
    currentPhase = n + 1;
    document.querySelector(`[data-phase="${n}"]`).classList.add('completed');
    if (currentPhase <= 10) selectPhase(currentPhase);
    else alert('Congratulations ‚Äì your relocation journey is complete! üéâ');
  }

  function completeJourney() {
    // Confetti animation
    for (let i = 0; i < 100; i++) {
      const conf = document.createElement('div');
      conf.style.position = 'fixed'; conf.style.left = Math.random() * window.innerWidth + 'px';
      conf.style.top = '-10px'; conf.style.width = '10px'; conf.style.height = '10px';
      conf.style.background = ['#c8102e', '#00247d', '#f0f8ff'][Math.floor(Math.random() * 3)];
      conf.style.pointerEvents = 'none'; conf.style.zIndex = '9999';
      document.body.appendChild(conf);
      conf.animate([{top: '100vh'}, {transform: `translateX(${Math.random() * 200 - 100}px)`}], {duration: 2000, easing: 'linear'});
      setTimeout(() => conf.remove(), 2000);
    }
  }

  // Fixed Calculator Functions
  const countries = {Portugal:1,Spain:1,UAE:1,Thailand:1,Cyprus:1,Greece:1,Italy:1,France:1,Poland:1,Latvia:1,'Costa Rica':1,Malta:1,Hungary:1,Argentina:1,USA:1};

  function calc() {
    const p = parseInt(document.getElementById('pension').value) || 0;
    const r = parseInt(document.getElementById('property').value) || 0;
    document.getElementById('pensionVal').textContent = p.toLocaleString();
    document.getElementById('propertyVal').textContent = r.toLocaleString();
    const savings = Math.round(p * 0.35 + r * 0.0025);
    const dest = document.getElementById('country').value || "Portugal";
    document.getElementById('result').innerHTML = `You could save <strong>¬£\( {savings.toLocaleString()}</strong>/year in \){dest}!`;
  }

  function changeCountry() {
    const c = document.getElementById('country').value;
    document.getElementById('visaTitle').innerText = `Which ${c} visa fits you in 2025?`;
    calc();
  }

  function checkVisa() {
    const c = document.getElementById('country').value;
    const income = parseInt(document.getElementById('q1').value || 0);
    const remote = document.getElementById('q2').value === "1";
    const visa = remote && income >= 2 ? "Digital Nomad" : income >= 1 ? (c === "Portugal" ? "D7" : (c === "Spain" ? "Non-Lucrative" : "Golden/Elite")) : "Other routes";
    let r = `<strong>${visa} Visa ‚Äì you qualify!</strong>`;
    if (document.getElementById('q4').value === "1") r += "<br>Family included!";
    document.getElementById('visaResult').innerHTML = r;
  }

  document.getElementById('files').onchange = e => {
    const needed = ['passport', 'criminal', 'bank', 'income'];
    const found = needed.map(k => Array.from(e.target.files).some(f => f.name.toLowerCase().includes(k)));
    let html = "";
    needed.forEach((k, i) => html += found[i] ? "‚úì " : "‚ùå " + k + "<br>");
    html += found.every(Boolean) ? "<br><strong>You're ready to apply!</strong>" : "";
    document.getElementById('docResult').innerHTML = html || "No files chosen";
  };

  function calcShipping() {
    const cost = document.getElementById('shipping').value;
    document.getElementById('shippingResult').innerHTML = `Shipping cost: ¬£${parseInt(cost).toLocaleString()}`;
  }

  function countdown() {
    const end = new Date("2031-04-05");
    const diff = end - new Date();
    const days = Math.floor(diff / 86400000);
    const hours = Math.floor((diff % 86400000) / 3600000);
    document.getElementById('countdown').innerHTML = `NI Top-Up Window: <strong>\( {days} days \){hours} hours left</strong>`;
  }
  setInterval(countdown, 3600000); countdown(); calc(); selectPhase(1);
</script>
</body>
</html>
