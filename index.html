<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BRITS ABROAD 2025 ‚Äì Escape the Budget Squeeze</title>
<style>
  body {font-family: 'Inter', Arial, sans-serif; background: linear-gradient(to bottom, #f0f8ff, #e6f2ff); color: #00247d; text-align: center; margin: 0; padding: 20px; line-height: 1.6;}
  h1 {font-size: 2.8em; color: #00247d; margin: 20px; font-weight: 700;}
  p.subtitle {font-size: 1.5em; margin-bottom: 30px;}
  select {font-size: 1.4em; padding: 12px; border-radius: 12px; margin: 20px; border: 2px solid #c8102e; background: white;}
  .card {background: white; border-radius: 20px; padding: 30px; margin: 20px auto; max-width: 460px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);}
  input[type=range] {width: 100%; height: 40px; margin: 15px 0; background: #e2e8f0; border-radius: 20px;}
  input[type=range]::-webkit-slider-thumb {background: #c8102e; width: 24px; height: 24px; border-radius: 50%; cursor: pointer;}
  button {background: #c8102e; color: white; padding: 16px 32px; font-size: 1.4em; border: none; border-radius: 50px; cursor: pointer; margin: 20px 0;}
  button:hover {background: #a30d25;}
  .result, .visaResult, .docResult {font-size: 1.6em; background: #c8102e; color: white; padding: 20px; border-radius: 16px; margin: 25px 0;}
  table {width: 100%; border-collapse: collapse; margin: 20px 0; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1);}
  th, td {padding: 12px; text-align: left; border-bottom: 1px solid #ddd;}
  th {background: #00247d; color: white;}
  .save {color: #c8102e; font-weight: bold;}
  .countdown {font-size: 1.8em; color: #c8102e; margin: 30px; font-weight: bold; background: white; padding: 20px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);}
  .phases {display: flex; justify-content: space-around; margin: 40px 0; flex-wrap: wrap;}
  .phase {width: 100px; height: 100px; background: #e6f2ff; border-radius: 50%; display: flex; flex-direction: column; justify-content: center; align-items: center; margin: 10px; cursor: pointer; transition: all 0.3s;}
  .phase.active {background: #c8102e; color: white; transform: scale(1.1);}
  .phase.completed {background: #28a745; color: white;}
  .phase-icon {font-size: 1.8em; margin-bottom: 5px;}
  .progress-bar {width: 100%; height: 10px; background: #e2e8f0; border-radius: 5px; margin: 20px 0; overflow: hidden;}
  .progress-fill {height: 100%; background: #c8102e; transition: width 0.5s; border-radius: 5px;}
  .retirement-table {margin: 20px 0;}
  .retirement-table tr:hover {background: #f0f8ff;}
  .detail {display: none; background: #e6f2ff; padding: 10px; border-radius: 8px; margin: 5px 0;}
  .detail.show {display: block;}
  @keyframes fadeIn {from {opacity: 0; transform: translateY(20px);} to {opacity: 1; transform: translateY(0);}}
  @keyframes pulse {0% {transform: scale(1);} 50% {transform: scale(1.05);} 100% {transform: scale(1);}}
  @media (prefers-color-scheme: dark) {body {background: #121212; color: #f0f8ff;} .card {background: #1e1e1e;}}
</style>
</head>
<body>
<h1>BRITS ABROAD 2025</h1>
<p class="subtitle">Escape the 2025 Budget squeeze ‚Äì Your Retirement Roadmap</p>

<div class="progress-bar">
  <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
</div>

<div class="phases" id="phases">
  <div class="phase" onclick="selectPhase(1)" data-phase="1">
    <div class="phase-icon">üåç</div>
    <div>Dream Destination</div>
  </div>
  <div class="phase" onclick="selectPhase(2)" data-phase="2">
    <div class="phase-icon">üí∞</div>
    <div>Financial Freedom</div>
  </div>
  <div class="phase" onclick="selectPhase(3)" data-phase="3">
    <div class="phase-icon">üìã</div>
    <div>Visa Victory</div>
  </div>
  <div class="phase" onclick="selectPhase(4)" data-phase="4">
    <div class="phase-icon">üìÅ</div>
    <div>Document Dynasty</div>
  </div>
  <div class="phase" onclick="selectPhase(5)" data-phase="5">
    <div class="phase-icon">üìä</div>
    <div>Budget Blueprint</div>
  </div>
  <div class="phase" onclick="selectPhase(6)" data-phase="6">
    <div class="phase-icon">üöö</div>
    <div>Move Mastery</div>
  </div>
  <div class="phase" onclick="selectPhase(7)" data-phase="7">
    <div class="phase-icon">üè†</div>
    <div>Settlement Success</div>
  </div>
  <div class="phase" onclick="selectPhase(8)" data-phase="8">
    <div class="phase-icon">üë•</div>
    <div>Community Connections</div>
  </div>
  <div class="phase" onclick="selectPhase(9)" data-phase="9">
    <div class="phase-icon">üíº</div>
    <div>Tax Triumph</div>
  </div>
  <div class="phase" onclick="selectPhase(10)" data-phase="10">
    <div class="phase-icon">üéâ</div>
    <div>Celebration Station</div>
  </div>
  <div class="phase" onclick="selectPhase(11)" data-phase="11">
    <div class="phase-icon">üë¥</div>
    <div>Retirement Roadmap</div>
  </div>
</div>

<div id="phaseContent">
  <div class="card" id="phase1">
    <h2>Phase 1: Dream Destination</h2>
    <select id="country" onchange="changeCountry()">
      <option>Portugal</option><option>Spain</option><option>UAE</option><option>Thailand</option><option>Cyprus</option>
      <option>Greece</option><option>Italy</option><option>France</option><option>Poland</option><option>Latvia</option>
      <option>Costa Rica</option><option>Malta</option><option>Hungary</option><option>Argentina</option><option>USA</option>
    </select>
    <button onclick="completePhase(1)">Complete Phase 1</button>
  </div>

  <!-- Other phases as before... (abbreviated for space) -->

  <div class="card" id="phase11" style="display:none;">
    <h2>Phase 11: Retirement Roadmap</h2>
    <p>Retirement Score for <span id="retCountry">Portugal</span>: <span id="retScore">85%</span> match</p>
    <table class="retirement-table">
      <tr onclick="toggleDetail('portugal')">
        <th>Country</th>
        <th>Retirement Visa</th>
        <th>Min Income (per month)</th>
        <th>Age Req.</th>
        <th>Insurance</th>
        <th>Renewal</th>
        <th>PR/Citizenship Path</th>
      </tr>
      <tr>
        <td>Portugal</td>
        <td>D7 Passive Income</td>
        <td>‚Ç¨870</td>
        <td>None</td>
        <td>Private</td>
        <td>1 year, then 2 years</td>
        <td>PR after 5 years</td>
      </tr>
      <tr id="portugal-detail" class="detail">
        <td colspan="7">Detailed: Pension tax at 10%; family included; Golden Visa option for ‚Ç¨250k investment. <a href="https://www.portugal.gov.pt/en">Apply here</a></td>
      </tr>
      <!-- Repeat for all 15 countries as in previous code -->
    </table>
    <button onclick="completePhase(11)">Complete Retirement Roadmap</button>
  </div>
</div>

<div class="countdown" id="countdown">NI Top-Up Window: calculating...</div>

<script>
  // All your existing JS + fixed calc, phases, toggleDetail, updateRetirementScore as in previous code
  // (Include the full script from earlier to keep calculator working)
</script>
</body>
</html>
