<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BRITS ABROAD 2025 – Full Relocation App</title>
<link rel="icon" href="icons/icon-192.svg" type="image/svg+xml">
<style>
  /* --- General Reset & Base --- */
  *{box-sizing:border-box;margin:0;padding:0;font-family:Inter,system-ui,sans-serif;}
  html,body{height:100%;background:#fdf6e3;color:#222;}
  body{display:flex;flex-direction:column;align-items:center;padding:0 10px;}
  h1,h2,h3{margin-bottom:12px;}
  h1{font-size:2.4rem;color:#b71c1c;margin-top:20px;text-align:center;}
  h2{font-size:1.8rem;color:#d32f2f;}
  .app{width:100%;max-width:960px;margin:0 auto;flex:1;display:flex;flex-direction:column;gap:20px;}
  /* --- Hero --- */
  .hero{width:100%;padding:40px 20px;background:#ffe0b2;border-radius:12px;text-align:center;margin-bottom:20px;}
  .hero h1{color:#b71c1c;}
  .hero p{font-size:1.2rem;color:#5d4037;}
  /* --- Phase navigation --- */
  .phases{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-bottom:10px;}
  .phase{padding:10px 14px;border-radius:12px;background:#ffe0b2;cursor:pointer;transition:0.2s;min-width:100px;text-align:center;}
  .phase.active{background:#d32f2f;color:#fff;font-weight:700;}
  .phase.completed{background:#388e3c;color:#fff;font-weight:700;}
  /* --- Cards --- */
  .card{background:#fff;padding:20px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.08);display:none;}
  .card.active{display:block;}
  label{display:block;margin:6px 0;}
  select,input[type=range]{padding:8px;width:100%;margin-bottom:10px;border-radius:8px;border:1px solid #d32f2f;}
  input[type=range]{accent-color:#d32f2f;}
  button{padding:10px 16px;border:none;border-radius:8px;background:#d32f2f;color:#fff;font-weight:700;cursor:pointer;margin-top:8px;}
  button:hover{opacity:0.9;}
  .result,.aiResult{margin-top:12px;padding:10px;border-radius:8px;background:#ffe0b2;}
  table{width:100%;border-collapse:collapse;margin-top:10px;}
  th,td{padding:8px;border:1px solid #ddd;text-align:left;}
  th{background:#d32f2f;color:#fff;}
</style>
</head>
<body>
<div class="app">
  <!-- Hero block -->
  <div class="hero">
    <h1>BRITS ABROAD 2025</h1>
    <p>Plan your luxury relocation with interactive tools, calculators & AI insights.</p>
  </div>

  <!-- Phase Navigation -->
  <div class="phases" id="phases"></div>

  <!-- Phase cards -->
  <div id="phaseContainer">
    <!-- Phase cards generated by JS -->
  </div>

  <!-- AI Summary -->
  <div class="card active" id="aiCard">
    <h2>AI Summary & Recommendations</h2>
    <button onclick="generateAI()">Generate AI Insights</button>
    <div class="aiResult" id="aiResult">AI output will appear here after inputs.</div>
  </div>
</div>

<script>
/********** Core Phase Data **********/
const PHASES=[
  {id:1,title:'Dream Destination'},
  {id:2,title:'Financial Freedom'},
  {id:3,title:'Visa Victory'},
  {id:4,title:'Document Vault'},
  {id:5,title:'Budget Blueprint'},
  {id:6,title:'Move Mastery'},
  {id:7,title:'Settlement Success'},
  {id:8,title:'Community Connections'},
  {id:9,title:'Tax Triumph'},
  {id:10,title:'Healthcare & GHIC/S1'},
  {id:11,title:'Retirement Roadmap'}
];

const COUNTRIES={
  Portugal:1,Spain:1.05,UAE:1.6,Thailand:0.6,Cyprus:1,Greece:1.1,Italy:1.2,France:1.25,Poland:0.5,Malta:1.05
};

let currentPhase=1;
let completed=[];

/********** Helper Functions **********/
function buildPhases(){
  const phasesEl=document.getElementById('phases');
  phasesEl.innerHTML='';
  PHASES.forEach(p=>{
    const el=document.createElement('div');
    el.className='phase';
    el.dataset.phase=p.id;
    el.textContent=p.title;
    if(p.id===currentPhase) el.classList.add('active');
    if(completed.includes(p.id)) el.classList.add('completed');
    el.onclick=()=>selectPhase(p.id);
    phasesEl.appendChild(el);
  });
}

function selectPhase(n){
  currentPhase=n;
  PHASES.forEach(p=>{
    const card=document.getElementById('phase'+p.id);
    if(card) card.classList.toggle('active',p.id===n);
  });
  buildPhases();
}

function completePhase(n){
  if(!completed.includes(n)) completed.push(n);
  const next=n+1;
  if(next<=PHASES.length) selectPhase(next);
  buildPhases();
}

/********** Generate Phase Cards **********/
function buildPhaseCards(){
  const container=document.getElementById('phaseContainer');
  PHASES.forEach(p=>{
    const card=document.createElement('div');
    card.className='card';
    card.id='phase'+p.id;

    switch(p.id){
      case 1:
        card.innerHTML=`
          <h2>${p.title}</h2>
          <label>Select Destination Country:</label>
          <select id="countrySelect">
            ${Object.keys(COUNTRIES).map(c=>`<option value="${c}">${c}</option>`).join('')}
          </select>
          <button onclick="completePhase(1)">Complete Phase 1</button>
        `;
        break;
      case 2:
        card.innerHTML=`
          <h2>${p.title}</h2>
          <label>Annual Pension (£): <span id="pensionVal">10000</span></label>
          <input type="range" id="pension" min="0" max="100000" value="10000" oninput="updateFinancials()">
          <label>UK Property Value (£): <span id="propertyVal">300000</span></label>
          <input type="range" id="property" min="0" max="2000000" step="10000" value="300000" oninput="updateFinancials()">
          <div class="result" id="financialResult">Estimated savings will appear here.</div>
          <button onclick="completePhase(2)">Complete Phase 2</button>
        `;
        break;
      case 3:
        card.innerHTML=`
          <h2>${p.title}</h2>
          <label>Monthly Income Bracket:</label>
          <select id="income">
            <option value="low">Under €870</option>
            <option value="medium">€870-€3,279</option>
            <option value="high">€3,280+</option>
          </select>
          <label>Remote Work:</label>
          <select id="remote"><option value="no">No</option><option value="yes">Yes</option></select>
          <div class="result" id="visaResult">Visa recommendation will appear here.</div>
          <button onclick="checkVisa();completePhase(3)">Complete Phase 3</button>
        `;
        break;
      default:
        card.innerHTML=`
          <h2>${p.title}</h2>
          <p>Interactive content will go here.</p>
          <button onclick="completePhase(${p.id})">Complete Phase ${p.id}</button>
        `;
    }

    container.appendChild(card);
  });
}

/********** Event Calculations **********/
function updateFinancials(){
  const pension=parseInt(document.getElementById('pension').value);
  const property=parseInt(document.getElementById('property').value);
  document.getElementById('pensionVal').textContent=pension.toLocaleString();
  document.getElementById('propertyVal').textContent=property.toLocaleString();
  const country=document.getElementById('countrySelect').value;
  const savings=Math.round((pension*0.35 + property*0.0025)* (COUNTRIES[country]||1));
  document.getElementById('financialResult').textContent=`Estimated savings: £${savings.toLocaleString()}`;
}

function checkVisa(){
  const income=document.getElementById('income').value;
  const remote=document.getElementById('remote').value;
  let recommendation='';
  if(income==='high' && remote==='yes') recommendation='Digital Nomad or Investor options likely';
  else if(income==='high') recommendation='Investor/Golden Visa options';
  else if(income==='medium') recommendation='Non-lucrative or similar EU visas';
  else recommendation='Limited options; consider lower cost countries';
  document.getElementById('visaResult').textContent=recommendation;
}

/********** AI Placeholder **********/
function generateAI(){
  const country=document.getElementById('countrySelect')?document.getElementById('countrySelect').value:'Portugal';
  const pension=document.getElementById('pension')?document.getElementById('pension').value:'0';
  const property=document.getElementById('property')?document.getElementById('property').value:'0';
  let summary=`Based on your inputs:\n`;
  summary+=`- Country: ${country}\n`;
  summary+=`- Pension: £${parseInt(pension).toLocaleString()}\n`;
  summary+=`- Property: £${parseInt(property).toLocaleString()}\n`;
  summary+=`AI Recommendation: Consider ${country} for your relocation. Review visa & cost of living carefully.`;
  document.getElementById('aiResult').textContent=summary;
}

/********** Init **********/
buildPhaseCards();
selectPhase(1);
buildPhases();
</script>
</body>
</html>
