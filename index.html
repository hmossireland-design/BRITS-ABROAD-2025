<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BRITS ABROAD 2025 – Escape the Budget Squeeze</title>
  <link rel="manifest" href="./manifest.json">
  <link rel="icon" href="./icons/icon-192.png" sizes="192x192">
  <style>
    body {font-family:Arial,sans-serif;background:#f0f8ff;color:#00247d;margin:0;padding:20px;line-height:1.5;}
    h1{font-size:2.8em;margin:20px;}
    .card{background:white;border-radius:20px;padding:25px;margin:20px auto;max-width:500px;box-shadow:0 10px 30px rgba(0,0,0,0.1);}
    select,input[type=range]{width:100%;padding:15px;margin:15px 0;border-radius:15px;font-size:1.2em;}
    input[type=range]::-webkit-slider-thumb{background:#c8102e;width:30px;height:30px;border-radius:50%;}
    .result{font-size:2.2em;background:#c8102e;color:white;padding:25px;border-radius:20px;margin:30px 0;}
    button{background:#c8102e;color:white;padding:16px 40px;border:none;border-radius:50px;font-size:1.4em;margin:10px;cursor:pointer;}
    button.buy{background:gold;color:#c8102e;font-size:2.2em;padding:20px 60px;box-shadow:0 10px 30px rgba(0,0,0,0.4);}
    .progress{height:12px;background:#ddd;border-radius:6px;overflow:hidden;margin:30px 0;}
    .fill{height:100%;background:#c8102e;width:0%;transition:width 0.6s;}
    .phase{width:70px;height:70px;background:#00247d;color:white;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;margin:8px;font-size:2em;}
    .phase.active{background:#c8102e;transform:scale(1.2);}
    .phase.completed{background:#28a745;}
    table{width:100%;border-collapse:collapse;margin:20px 0;background:white;border-radius:12px;overflow:hidden;box-shadow:0 4px 20px rgba(0,0,0,0.1);}
    th{background:#00247d;color:white;padding:15px;text-align:left;}
    td{padding:15px;border-bottom:1px solid #ddd;cursor:pointer;}
    tr:hover{background:#f0f8ff;}
    .detail{background:#e6f2ff;display:none;padding:15px;border-radius:8px;}
    .detail.show{display:table-row;}
  </style>
</head>
<body>
<h1>BRITS ABROAD 2025</h1>
<p style="font-size:1.6em;">Escape the 2025 Budget squeeze</p>

<div class="progress"><div class="fill" id="progressFill"></div></div>

<div>
  <div class="phase completed">1</div><div class="phase active" id="p2">2</div><div class="phase" id="p3">3</div>
  <div class="phase" id="p4">4</div><div class="phase" id="p5">5</div><div class="phase" id="p6">6</div>
  <div class="phase" id="p7">7</div><div class="phase" id="p8">8</div><div class="phase" id="p9">9</div>
  <div class="phase" id="p10">10</div><div class="phase" id="p11">11</div>
</div>

<div class="card">
  <select id="country" onchange="calc()">
    <option>Portugal</option><option>Spain</option><option>UAE</option><option>Thailand</option><option>Cyprus</option>
    <option>Greece</option><option>Italy</option><option>France</option><option>Poland</option><option>Malta</option>
  </select>

  <label>Annual Pension: £<span id="pensionVal">25,000</span></label>
  <input type="range" min="0" max="100000" value="25000" step="1000" id="pension" oninput="calc()">

  <label>UK Property Value: £<span id="propertyVal">500,000</span></label>
  <input type="range" min="0" max="3000000" value="500000" step="10000" id="property" oninput="calc()">

  <div class="result" id="result">You could save <strong>£15,625</strong>/year abroad!</div>

  <button class="buy" onclick="window.location.href='https://buy.stripe.com/28o8x57XJ5rT8w8fYY'">
    UNLOCK FULL PACK – ONLY £9.97
  </button>
  <p>30-page PDF • Visa templates • Lawyers • Checklists • Instant download</p>
</div>

<div class="card" id="phase11" style="display:none;">
  <h2>Phase 11 – Retirement Visa Comparison</h2>
  <table>
    <tr><th>Country</th><th>Visa</th><th>Min Income</th><th>Age</th><th>PR Path</th></tr>
    <!-- Add rows here (same as before) -->
  </table>
</div>

<script>
let phase = 1;
const total = 11;

function calc() {
  const p = parseInt(document.getElementById('pension').value)||0;
  const r = parseInt(document.getElementById('property').value)||0;
  const c = document.getElementById('country').value;
  document.getElementById('pensionVal').textContent = p.toLocaleString();
  document.getElementById('propertyVal').textContent = r.toLocaleString();
  const savings = Math.round(p*0.35 + r*0.0025);
  document.getElementById('result').innerHTML = `You could save <strong>£${savings.toLocaleString()}</strong>/year in ${c}!`;
  document.getElementById('progressFill').style.width = (phase/total*100)+'%';
}
calc();

function nextPhase() {
  if (phase < total) {
    phase++;
    document.getElementById('p'+(phase-1)).classList.replace('active','completed');
    document.getElementById('p'+phase).classList.add('active');
    calc();
    if (phase === 11) document.getElementById('phase11').style.display = 'block';
  }
}

// Register service worker
if('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./sw.js')
    .then(() => console.log('Service Worker registered'))
    .catch(err => console.log('SW registration failed:', err));
}
</script>
</body>
</html>
